
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Getting started &#8212; VAMPIRES DPP</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=4fea3ae4a0a4ba949df0a89bbae557cc2ce861ae" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Pipeline" href="pipeline.html" />
    <link rel="prev" title="Installation" href="installation.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      
      <h1 class="site-logo" id="site-title">VAMPIRES DPP</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="installation.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Getting started
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="pipeline.html">
   Pipeline
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="examples/index.html">
   Examples
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="examples/file_organization.html">
     File Organization
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="examples/image_registration.html">
     Image Registration
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="examples/frame_selection.html">
     Frame Selection
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="api/index.html">
   API/Reference
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="api/organization.html">
     Organization
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/pipeline.html">
     Pipeline
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/calibration.html">
     Calibration
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/frame_selection.html">
     Frame Selection
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/image_registration.html">
     Image Registration
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/image_processing.html">
     Image Processing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/satellite_spots.html">
     Satellite Spots
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right"><a href="https://github.com/scexao-org/vampires_dpp"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="bottom"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/gettingstarted.md.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#vampires-observation-modes">
   VAMPIRES Observation Modes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#vampires-data-formats">
   VAMPIRES Data Formats
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#conventions">
     Conventions
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#formats-for-imaging-and-pdi-modes">
     Formats for imaging and PDI modes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#processing-workflows">
   Processing Workflows
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#getting-help">
   Getting Help
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Getting started</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#vampires-observation-modes">
   VAMPIRES Observation Modes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#vampires-data-formats">
   VAMPIRES Data Formats
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#conventions">
     Conventions
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#formats-for-imaging-and-pdi-modes">
     Formats for imaging and PDI modes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#processing-workflows">
   Processing Workflows
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#getting-help">
   Getting Help
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="getting-started">
<h1>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">#</a></h1>
<section id="vampires-observation-modes">
<h2>VAMPIRES Observation Modes<a class="headerlink" href="#vampires-observation-modes" title="Permalink to this headline">#</a></h2>
<p>VAMPIRES is an incredibly diverse instrument in its usage with SCExAO. It can be used for studying evolved stellar physics, protoplanetary disks, polarimetry, H-ɑ emission, in addition to an interferometric mode via sparse aperture masking (SAM). VAMPIRES is also used for focal-plane wavefront sensing, for example using differential focus for <span class="xref myst">phase diversity</span>, as well as complementary data for infrared observations (i.e., telemetry). <code class="docutils literal notranslate"><span class="pre">vampires_dpp</span></code> provides tooling primarily for imaging modes, although the image-processing tools provide building blocks for a variety of applications of VAMPIRES data (and PRs are welcome for interferometric modes!). The following observation modes have well-defined tutorials and workflows, and represent the majority of open-use observations</p>
<ol class="simple">
<li><p>Speckle imaging / telemetry (TODO)</p></li>
<li><p>Polarimetric differential imaging (TODO)</p></li>
<li><p>Coronagraphic polarimetric differential imaging (TODO)</p></li>
<li><p>H-ɑ differential imaging (TODO)</p></li>
</ol>
</section>
<section id="vampires-data-formats">
<h2>VAMPIRES Data Formats<a class="headerlink" href="#vampires-data-formats" title="Permalink to this headline">#</a></h2>
<p>Depending on who you are, you may have to deal with a variety of VAMPIRES data formats. For open-use observers, this is the STARS gen-2 archive format, which is different from the format saved by VAMPIRES during acquisition, and is different from internal telemetry stream data. The <code class="docutils literal notranslate"><span class="pre">vampires_dpp</span></code> prioritizes the gen-2 format highest, but the API should be flexible enough to accommadate any user of VAMPIRES- observer or engineer.</p>
<section id="conventions">
<h3>Conventions<a class="headerlink" href="#conventions" title="Permalink to this headline">#</a></h3>
<p>The data follow these general specifications</p>
<ul class="simple">
<li><p>Parallactic angles are specified as degrees CCW from the North-celestial pole</p></li>
</ul>
<aside class="margin sidebar">
<p class="sidebar-title">SAOImage DS9</p>
<p>These coordinates are the transpose/reverse of DS9 and minus one.</p>
</aside>
<ul class="simple">
<li><p>Image coordinates follow <em>python</em> conventions</p>
<ul>
<li><p>The bottom-left pixel center has coordinates <span class="math notranslate nohighlight">\((0, 0)\)</span></p></li>
<li><p>The natural axes for images in numpy arrays are <span class="math notranslate nohighlight">\((y, x)\)</span></p></li>
<li><p>The image center is therefore <span class="math notranslate nohighlight">\((N_y - 1)/2, (N_x - 1)/2\)</span></p></li>
</ul>
</li>
<li><p>Camera 1 is flipped on its y-axis compared to sky</p>
<ul>
<li><p>The beam-splitter will naturally mirror the beam along this axis so camera 2 doesn’t need flipped</p></li>
</ul>
</li>
</ul>
</section>
<section id="formats-for-imaging-and-pdi-modes">
<h3>Formats for imaging and PDI modes<a class="headerlink" href="#formats-for-imaging-and-pdi-modes" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>STARS archive format (<strong>default for open-use observers</strong>)</p>
<ul>
<li><p>Files are given frame id names, e.g. “VMPA0023445.fits”</p></li>
<li><p>Each file corresponds to a single camera, FLC state, and HWP angle</p></li>
<li><p>Rich FITS headers</p></li>
</ul>
</li>
<li><p>VAMPIRES format</p>
<ul>
<li><p>Files have names as set by controller, e.g. “HD141569A_00_750-50_LyotStop_00_cam1.fits”</p></li>
<li><p>Each file is a raw cube from the camera, which includes bad readout frame in the first frame</p></li>
<li><p>FLC states interleaved in every other frame for PDI mode</p></li>
<li><p>Rich FITS headers</p></li>
</ul>
</li>
<li><p>Stream format</p>
<ul>
<li><p>Files are given stream names, e.g. “vcamim1_12:04:34.234412598.fits”</p></li>
<li><p>Camera 1 and 2 may or may not be synced, depending on observer usage</p></li>
<li><p>No meaningful metadata present in the FITS headers (e.g., gain, HWP, camera, etc.)</p></li>
<li><p>Extremely precise frame-grabber timing</p></li>
</ul>
</li>
</ul>
<div class="danger admonition">
<p class="admonition-title">Multiple HDU FITS files</p>
<p>Some old VAMPIRES data (circa 2019 and earlier) had multiple FITS header data units (HDUs) to store header information. <code class="docutils literal notranslate"><span class="pre">vampires_dpp</span></code> is not built to support these data, but a conversion script could be written if requested.</p>
</div>
</section>
</section>
<section id="processing-workflows">
<h2>Processing Workflows<a class="headerlink" href="#processing-workflows" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">vampires_dpp</span></code> is built with multiple processing workflows in mind to support the large diversity of observing modes and usages of VAMPIRES. Typical VAMPIRES observations produce many gigabytes of data across hundreds of files, which means processing data must occur on a file-by-file basis, with the potential for multi-processing. A large portion of the <code class="docutils literal notranslate"><span class="pre">vampires_dpp</span></code> API is available in a command line interface (CLI) for quick processing of files and various other helpers. Despite the attractive ease of using the scripting interface, if you plan to publish or share the data you have reduced, please consider saving your commands in bash scripts or using the python interface and a python script so that your reductions can be shared with and reproduced by future investigators.</p>
<p>As alluded to above, the most direct interface with the API is, well, the Python API itself! Any script you find will be composed of functions in the <code class="docutils literal notranslate"><span class="pre">vampires_dpp</span></code> python module, which gets installed when you <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code> this code. If you are someone who likes working in Jupyter notebooks, or in interactive scripting environments like iPython, this will give you not only the most direct access to the API, but will allow you to customize your process however you please. The python methods even include the same progress bars and file-by-file processing of the command line tools!</p>
</section>
<section id="getting-help">
<h2>Getting Help<a class="headerlink" href="#getting-help" title="Permalink to this headline">#</a></h2>
<p>Hopefully the tutorials we provide give enough explanation for the common use-cases of VAMPIRES, but if you ran into issues or have suggestions please let us know in the <a class="reference external" href="https://github.com/scexao-org/vampires_dpp/issue/new">issues</a>. If you have more complicated questions or data issues contact the SCExAO team directly (c.c. <a class="reference external" href="mailto:barnaby&#46;norris&#37;&#52;&#48;sydney&#46;edu&#46;au">Barnaby Norris</a> and <a class="reference external" href="mailto:mdlucas&#37;&#52;&#48;hawaii&#46;edu">Miles Lucas</a>).</p>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="installation.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Installation</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="pipeline.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Pipeline</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Miles Lucas<br/>
  
      &copy; Copyright 2022, Miles Lucas.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>